# üéØ OPTIMIZED DETECTION PARAMETERS - ICT Engine v6.0 Enterprise
# ===============================================================
# Par√°metros optimizados basados en an√°lisis de rendimiento y precisi√≥n
# Actualizado: Septiembre 2025

# üìä ORDER BLOCKS DETECTION OPTIMIZATION
order_blocks:
  # Par√°metros b√°sicos optimizados
  min_confidence: 65.0              # Incrementado de 55 a 65 para reducir falsos positivos
  lookback_period: 15               # Reducido de 20 a 15 para mejor performance
  max_distance_pips: 25             # Reducido de 30 a 25 para mayor precisi√≥n
  volume_threshold: 1.5             # Incrementado de 1.2 a 1.5 para mejor filtrado
  
  # Nuevos par√°metros de optimizaci√≥n
  strength_multiplier: 1.2          # Factor para amplificar se√±ales fuertes
  confluence_bonus: 0.15            # Bonus de confianza por confluencias (+15%)
  session_priority_bonus: 0.10     # Bonus para killzones (+10%)
  
  # Filtros avanzados
  filters:
    min_body_size_pips: 8           # Tama√±o m√≠nimo del cuerpo de vela
    min_wick_ratio: 0.3             # Ratio m√≠nimo de mecha vs cuerpo
    max_age_bars: 50                # M√°ximo de barras para considerar un OB v√°lido
    volume_confirmation: true       # Requiere confirmaci√≥n por volumen

# üîÑ CHOCH DETECTION OPTIMIZATION
choch:
  # Confianza y umbrales
  base_confidence: 70.0             # Incrementado de default para mayor precision
  min_swing_size_pips: 15           # Tama√±o m√≠nimo de swing para CHoCH v√°lido
  trend_confirmation_bars: 5        # Barras necesarias para confirmar cambio de tendencia
  
  # Factores de peso por timeframe
  timeframe_weights:
    H4: 1.0                         # Peso base para H4
    M15: 0.8                        # Reducido para M15
    M5: 0.6                         # Menor peso para M5
  
  # Validaciones adicionales
  validation:
    require_volume_spike: true      # Requiere pico de volumen en ruptura
    min_break_distance_pips: 5      # Distancia m√≠nima de ruptura
    structure_alignment_bonus: 0.20 # Bonus por alineaci√≥n multi-timeframe

# üìà BOS DETECTION OPTIMIZATION  
bos:
  # Par√°metros de detecci√≥n
  min_confidence: 75.0              # Mayor confianza requerida para BOS
  swing_detection_window: 5         # Ventana para detectar swing points
  break_confirmation_pips: 3        # Pips m√≠nimos para confirmar ruptura
  
  # Filtros de calidad
  quality_filters:
    min_momentum_pips: 10           # Momentum m√≠nimo post-ruptura
    volume_increase_threshold: 1.3  # Incremento de volumen requerido
    retest_tolerance_pips: 2        # Tolerancia para retests

# üíé FVG DETECTION OPTIMIZATION
fair_value_gaps:
  # Configuraci√≥n b√°sica optimizada
  min_gap_size_pips: 3.0            # Incrementado de 2.0 para reducir ruido
  max_gap_size_pips: 50.0           # L√≠mite superior para gaps v√°lidos
  fill_tolerance_pips: 1.0          # Tolerancia para considerar gap "filled"
  
  # Adaptaci√≥n por condiciones de mercado
  market_conditions:
    high_volatility:
      min_gap_size_multiplier: 1.5  # Incrementar umbral en alta volatilidad
      confidence_adjustment: -0.1   # Reducir confianza por volatilidad
    
    low_volatility:
      min_gap_size_multiplier: 0.7  # Reducir umbral en baja volatilidad
      confidence_adjustment: 0.1    # Incrementar confianza por estabilidad
    
    trending_market:
      strength_multiplier: 1.3      # Incrementar fuerza en mercado tendencial
      
    ranging_market:
      strength_multiplier: 0.8      # Reducir fuerza en mercado lateral

# üéØ SMART MONEY CONCEPTS OPTIMIZATION
smart_money:
  # Detecci√≥n de manipulaci√≥n
  manipulation:
    min_fake_breakout_pips: 8       # Tama√±o m√≠nimo de fake breakout
    reversal_confirmation_pips: 12  # Confirmaci√≥n de reversal post-manipulaci√≥n
    
  # An√°lisis de liquidez
  liquidity:
    sweep_detection_pips: 5         # Distancia para detectar liquidity sweep
    accumulation_zone_pips: 15      # Tama√±o de zona de acumulaci√≥n
    
  # Flujo institucional
  institutional_flow:
    min_order_size_threshold: 2.0   # M√∫ltiplo de volumen promedio
    flow_confirmation_bars: 3       # Barras para confirmar flujo

# ‚ö° PERFORMANCE OPTIMIZATION
performance:
  # L√≠mites de procesamiento
  max_patterns_per_symbol: 10       # M√°ximo de patrones por s√≠mbolo
  analysis_timeout_seconds: 30      # Timeout para an√°lisis por s√≠mbolo
  memory_usage_limit_mb: 512        # L√≠mite de memoria por an√°lisis
  
  # Cache y persistencia
  cache:
    pattern_ttl_minutes: 15         # TTL para patrones en cache
    enable_lazy_loading: true       # Carga perezosa de datos hist√≥ricos
    max_cache_size_mb: 256          # Tama√±o m√°ximo de cache
  
  # Filtros de performance
  filters:
    skip_low_confidence: true       # Omitir patrones de baja confianza
    min_relevance_score: 0.6        # Score m√≠nimo de relevancia
    prioritize_recent_patterns: true # Priorizar patrones recientes

# üîß VALIDATION AND QUALITY CONTROL
validation:
  # Niveles de validaci√≥n
  validation_level: "STANDARD"       # MINIMAL, STANDARD, STRICT
  
  # M√©tricas de calidad
  quality_metrics:
    min_pattern_accuracy: 0.70      # Precisi√≥n m√≠nima requerida (70%)
    max_false_positive_rate: 0.20   # Tasa m√°xima de falsos positivos (20%)
    target_precision: 0.80          # Precisi√≥n objetivo (80%)
    target_recall: 0.75             # Recall objetivo (75%)
  
  # Backtesting validation
  backtest:
    min_sample_size: 100            # M√≠nimo de muestras para validaci√≥n
    lookback_days: 30               # D√≠as de lookback para validaci√≥n
    cross_validation_folds: 5       # Folds para cross-validation

# üö® ALERT OPTIMIZATION
alerting:
  # Umbrales de alertas
  thresholds:
    high_confidence: 85.0           # Confianza alta para alertas inmediatas
    medium_confidence: 70.0         # Confianza media para alertas normales
    low_confidence: 55.0            # Confianza baja para alertas informativas
  
  # Filtros de spam
  anti_spam:
    min_time_between_alerts: 300    # M√≠nimo 5 minutos entre alertas similares
    max_alerts_per_hour: 12         # M√°ximo 12 alertas por hora
    duplicate_detection: true       # Detectar alertas duplicadas

# üìä MONITORING AND METRICS
monitoring:
  # M√©tricas clave
  key_metrics:
    - "detection_accuracy"
    - "false_positive_rate" 
    - "processing_time"
    - "memory_usage"
    - "pattern_count"
  
  # Intervalos de reportes
  reporting:
    live_metrics_interval: 60       # Actualizar m√©tricas cada minuto
    summary_report_interval: 3600   # Reporte resumen cada hora
    performance_log_interval: 300   # Log de performance cada 5 minutos

# üéØ SYMBOL-SPECIFIC OPTIMIZATIONS
symbol_overrides:
  # Majors - Mayor liquidez, par√°metros est√°ndar
  majors:
    symbols: ["EURUSD", "GBPUSD", "USDJPY", "USDCHF"]
    confidence_bonus: 0.05
    min_gap_size_pips: 2.5
  
  # Minors - Menor liquidez, par√°metros ajustados
  minors:
    symbols: ["EURGBP", "EURJPY", "GBPJPY"]
    confidence_penalty: 0.05
    min_gap_size_pips: 4.0
  
  # Exotics - Baja liquidez, par√°metros conservadores
  exotics:
    symbols: ["USDTRY", "USDZAR", "USDMXN"]
    confidence_penalty: 0.10
    min_gap_size_pips: 6.0
    volume_threshold: 2.0

# üîÑ ADAPTIVE PARAMETERS
adaptive:
  # Ajuste autom√°tico basado en performance
  auto_adjustment:
    enabled: true
    adjustment_interval_hours: 24   # Ajustar par√°metros cada 24 horas
    max_adjustment_percent: 0.20    # M√°ximo 20% de ajuste por periodo
  
  # Condiciones de mercado
  market_regime_detection:
    enabled: true
    volatility_lookback_days: 5
    trend_strength_threshold: 0.6
  
  # Learning from performance
  machine_learning:
    enabled: false                  # Deshabilitado por defecto
    model_update_frequency: "weekly"
    min_training_samples: 1000